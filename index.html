<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />

    <title>Sis Store • E-Menu</title>

    <!-- Fonts + Tailwind CDN -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Speed: preconnect to data & images -->
    <link rel="preconnect" href="https://script.google.com" />
    <link rel="dns-prefetch" href="https://script.google.com" />
    <link rel="preconnect" href="https://res.cloudinary.com" />
    <link rel="dns-prefetch" href="https://res.cloudinary.com" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      /* Slightly darker blue theme */
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: [
                "Inter",
                "system-ui",
                "-apple-system",
                "Segoe UI",
                "Roboto",
                "sans-serif",
              ],
            },
            colors: {
              brand: {
                50: "#EFF4F9",
                100: "#DEE8F3",
                200: "#C2D4E8",
                300: "#A3BFDB",
                400: "#89A7CA",
                500: "#5F86B1",
                600: "#4E729E",
                700: "#415E83",
                800: "#354C69",
                900: "#2A3D54",
              },
              ink: {
                50: "#f8fafc",
                100: "#f1f5f9",
                200: "#e2e8f0",
                300: "#cbd5e1",
                400: "#94a3b8",
                500: "#64748b",
                600: "#475569",
                700: "#334155",
                800: "#1e293b",
                900: "#0f172a",
              },
            },
            boxShadow: {
              soft: "0 10px 30px rgba(47,61,84,0.14)",
              inner: "inset 0 1px 0 rgba(255,255,255,.6)",
            },
          },
        },
      };
    </script>

    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>

  <!-- Lock page scroll; only <main> scrolls -->
  <body
    class="min-h-[100dvh] h-[100dvh] overflow-hidden bg-ink-50 text-ink-800 flex flex-col"
  >
    <!-- Global background so header + content feel unified -->
    <div
      class="fixed inset-0 -z-10 bg-gradient-to-br from-brand-50 via-white to-brand-100"
    ></div>

    <!-- Toast -->
    <div id="toast" class="fixed top-4 right-4 z-[100] hidden"></div>

    <!-- Sticky Header (condensed on mobile) -->
    <header class="sticky top-0 z-40">
      <div
        class="relative max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 sm:py-6 bg-white/40 backdrop-blur supports-[backdrop-filter]:bg-white/40 rounded-b-xl"
      >
        <div class="flex items-center justify-between gap-3">
          <div class="flex items-center gap-2 sm:gap-3 select-none">
            <div
              class="h-8 w-8 sm:h-10 sm:w-10 rounded-2xl bg-brand-600 text-white grid place-items-center shadow-soft"
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path
                  d="M11 4a1 1 0 0 1 2 0v3h3a1 1 0 1 1 0 2h-3v3a1 1 0 1 1-2 0V9H8A1 1 0 1 1 8 7h3V4Z"
                  fill="currentColor"
                />
              </svg>
            </div>
            <div>
              <h1 class="text-base sm:text-2xl font-semibold tracking-tight">
                Sis Store <span class="text-brand-700">E-Menu</span>
              </h1>
              <p class="hidden sm:block text-sm text-ink-500">
                Accessories — fast to browse, easy to pick.
              </p>
            </div>
          </div>

          <button
            id="quoteBtn"
            class="relative inline-flex items-center gap-1 sm:gap-2 rounded-xl border border-ink-200 bg-white px-3 py-1.5 sm:px-4 sm:py-2 text-xs sm:text-sm font-medium shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-brand-500"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              class="text-brand-700"
            >
              <path
                d="M3 7h18M3 12h18M3 17h18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            <span class="hidden sm:inline">Cart</span>
            <span
              id="quoteCount"
              class="ml-1 inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-brand-600 px-1.5 text-[11px] font-semibold text-white"
              >0</span
            >
          </button>
        </div>

        <!-- Search + Sort (compact on mobile) -->
        <div
          class="mt-3 sm:mt-6 grid grid-cols-1 md:grid-cols-3 gap-2 sm:gap-3"
        >
          <div class="md:col-span-2">
            <label class="relative block">
              <input
                id="search"
                type="search"
                placeholder="Search by name or code…"
                class="h-10 sm:h-auto w-full rounded-2xl border border-ink-200 bg-white/90 px-11 sm:px-12 py-2.5 sm:py-3 text-[13px] sm:text-[15px] shadow-sm placeholder:text-ink-400 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-200"
              />
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                class="absolute left-3.5 top-1/2 -translate-y-1/2 text-ink-400"
              >
                <path
                  d="M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm10 2-4.35-4.35"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
              <button
                id="clearSearch"
                class="hidden absolute right-2.5 top-1/2 -translate-y-1/2 rounded-full p-1.5 sm:p-2 text-ink-400 hover:text-ink-600"
                aria-label="Clear search"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M6 6l12 12M6 18L18 6"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                  />
                </svg>
              </button>
            </label>
          </div>
          <div class="md:col-span-1">
            <label class="relative block">
              <select
                id="sort"
                class="h-10 sm:h-auto w-full appearance-none rounded-2xl border border-ink-200 bg-white/90 px-3 sm:px-4 py-2.5 sm:py-3 text-[13px] sm:text-[15px] shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-200"
              >
                <option value="popular">Sort: Featured</option>
                <option value="price-asc">Price: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="name-asc">Name: A → Z</option>
                <option value="name-desc">Name: Z → A</option>
              </select>
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                class="pointer-events-none absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-ink-400"
              >
                <path
                  d="M6 9l6 6 6-6"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </label>
          </div>
        </div>

        <!-- Categories -->
        <div
          id="categories"
          class="mt-3 sm:mt-5 flex gap-2 overflow-x-auto hide-scrollbar"
        ></div>
      </div>
    </header>

    <!-- Main (only this scrolls; scrollbar hidden) -->
    <main class="flex-1 overflow-y-auto hide-scrollbar">
      <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-8">
        <div
          id="resultsInfo"
          class="mb-3 sm:mb-4 text-xs sm:text-sm text-ink-500"
        ></div>
        <!-- 2 columns on mobile -->
        <div
          id="grid"
          class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-5"
        ></div>
      </div>
    </main>

    <!-- Cart Drawer -->
    <aside
      id="drawer"
      class="fixed right-0 top-0 h-[100dvh] w-[380px] max-w-[90vw] translate-x-full transition-transform duration-300 z-50 overscroll-contain"
    >
      <div
        class="h-full bg-white shadow-2xl border-l border-ink-200 flex flex-col min-h-0"
      >
        <!-- Header -->
        <div
          class="sticky top-0 z-10 flex items-center justify-between px-5 py-4 border-b border-ink-200 bg-ink-50/80 backdrop-blur supports-[backdrop-filter]:bg-ink-50/60"
        >
          <h3 class="font-semibold">Your Cart</h3>
          <button
            id="closeDrawer"
            class="rounded-lg p-2 hover:bg-ink-100"
            aria-label="Close"
          >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path
                d="M6 6l12 12M6 18L18 6"
                stroke="#0f172a"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </div>

        <!-- Empty -->
        <div
          id="quoteEmpty"
          class="flex-1 grid place-items-center text-center p-8 text-ink-500"
        >
          <div>
            <div
              class="mx-auto mb-3 h-12 w-12 rounded-2xl bg-brand-100 grid place-items-center text-brand-700"
            >
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                <path
                  d="M3 7h18M3 12h18M3 17h18"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </div>
            <p class="font-medium">Your cart is empty</p>
            <p class="text-sm">Add products to send to Telegram later.</p>
          </div>
        </div>

        <!-- Items -->
        <div
          id="quoteItems"
          class="flex-1 overflow-y-auto hidden overscroll-contain min-h-0"
        >
          <ul class="divide-y divide-ink-100" id="quoteList"></ul>
        </div>

        <!-- Footer -->
        <div
          class="sticky bottom-0 z-10 p-4 border-t border-ink-200 bg-white space-y-3 pb-[calc(env(safe-area-inset-bottom)+16px)]"
        >
          <button
            id="copyCart"
            class="w-full rounded-xl bg-brand-600 text-white font-medium py-3 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-300"
          >
            Copy cart to clipboard
          </button>
          <button
            id="shareTelegram"
            class="w-full rounded-xl border border-brand-500 text-brand-700 font-medium py-3 hover:bg-brand-50"
          >
            Send cart via Telegram
          </button>
        </div>
      </div>
    </aside>

    <!-- Product Modal (centered, compact rows) -->
    <div
      id="modal"
      class="fixed inset-0 z-50 hidden grid place-items-center p-3"
    >
      <!-- backdrop -->
      <div class="absolute inset-0 bg-black/50" data-modal-close></div>

      <!-- panel -->
      <div
        class="relative w-[95%] max-w-3xl rounded-2xl bg-white shadow-2xl max-h-[88dvh] flex flex-col overflow-hidden"
      >
        <!-- scrollable content -->
        <div class="flex-1 overflow-y-auto overscroll-contain">
          <div class="flex flex-col md:flex-row">
            <!-- image -->
            <div
              class="md:w-1/2 p-4 md:p-6 pb-0 md:pb-6 border-b md:border-b-0 md:border-r border-ink-100"
            >
              <div
                class="aspect-[4/3] w-full rounded-xl bg-gradient-to-br from-ink-100 via-white to-brand-50 overflow-hidden"
              >
                <img
                  id="modalImg"
                  src=""
                  alt=""
                  class="h-full w-full object-cover"
                />
              </div>
            </div>

            <!-- details -->
            <div class="md:w-1/2 p-4 md:p-6">
              <!-- Row 1: Category + Code (same line) -->
              <div class="flex flex-wrap items-center gap-2">
                <span
                  id="modalCategory"
                  class="inline-flex items-center rounded-full bg-brand-50 text-brand-700 px-2.5 py-1 text-[11px] md:text-xs font-semibold ring-1 ring-brand-200"
                >
                  Category
                </span>
                <span
                  class="inline-flex items-center rounded-full bg-ink-900/90 text-white px-2.5 py-1 text-[11px] md:text-xs font-semibold tracking-wide"
                >
                  <span id="modalCode"></span>
                </span>
              </div>

              <!-- Title -->
              <h3
                id="modalName"
                class="mt-2 text-base md:text-xl font-semibold leading-snug"
              ></h3>

              <!-- Description -->
              <p
                id="modalDesc"
                class="mt-2 text-[13px] md:text-[15px] leading-relaxed text-ink-600"
              ></p>
            </div>
          </div>
        </div>

        <!-- Row 2: Price + buttons (same line) -->
        <div class="p-3 md:p-4 border-t border-ink-200 bg-white">
          <div class="flex items-center justify-between gap-3">
            <div
              id="modalPrice"
              class="text-lg md:text-2xl font-semibold text-brand-800"
            ></div>
            <div class="flex items-center gap-2">
              <button
                id="modalAddQuote"
                class="rounded-xl bg-brand-600 text-white font-medium px-4 py-2 md:px-5 md:py-2.5 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-300"
              >
                Add to cart
              </button>
              <button
                class="rounded-xl border border-ink-200 bg-white px-4 py-2 md:px-5 md:py-2.5 font-medium hover:shadow-sm"
                data-modal-close
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Config first, then app -->
    <script src="assets/js/config.js" defer></script>
    <script src="assets/js/app.js" defer></script>
  </body>
</html>
